<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <title>會員登入 - 微笑書店</title>

  <!-- 公用樣式 -->
  <link rel="stylesheet" href="./assets/user.css">

  <!-- 登入專用 CSS -->
  <link rel="stylesheet" href="./assets/login.css">

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

  <script>
    // #region agent log
    (function () {
      try {
        const OriginalWebSocket = window.WebSocket;
        if (!OriginalWebSocket) return;
        window.WebSocket = function (url, protocols) {
          try {
            fetch('http://127.0.0.1:7242/ingest/24433843-7085-4448-81ca-a35b44f183c4', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                sessionId: 'debug-session',
                runId: 'run1',
                hypothesisId: 'WS',
                location: 'login.html:ws-shim',
                message: 'WebSocket constructor called',
                data: { url: String(url), stack: (new Error('ws')).stack },
                timestamp: Date.now()
              })
            }).catch(() => { });
          } catch (_) { }
          return protocols !== undefined
            ? new OriginalWebSocket(url, protocols)
            : new OriginalWebSocket(url);
        };
        window.WebSocket.prototype = OriginalWebSocket.prototype;
      } catch (_) { }
    })();
    // #endregion
  </script>

  <!-- 公用 JS（全域登入管理） -->
  <script src="./assets/common.js" defer></script>

  <!-- 登入專用 JS -->
  <script src="./assets/login.js" defer></script>
</head>

<body>

  <div class="login-box">
    <div class="logo-title">微笑書店</div>
    <div class="subtitle">歡迎回來！請登入帳戶</div>

    <h2 class="login-title">會員登入</h2>

    <!-- 訊息提示區域 -->
    <div id="alertBox" class="alert"></div>

    <div class="form-group">
      <label>帳號 <span style="color:red;">*</span></label>
      <input type="text" id="account" placeholder="請輸入帳號" required autofocus>
    </div>

    <div class="form-group">
      <label>密碼 <span style="color:red;">*</span></label>
      <input type="password" id="password" placeholder="請輸入密碼" required>
    </div>

    <!-- 忘記密碼 -->
    <div class="forgot-password">
      <a href="forgot-password.html">忘記密碼？</a>
    </div>

    <!-- 加入會員 -->
    <div class="mt-20 text-center">
      還沒有帳號？
      <span class="link" onclick="location.href='register.html'">立即註冊</span>
    </div>

    <!-- 返回首頁 -->
    <div class="footer-links">
      <a href="index.html">返回首頁</a>
      <a href="register.html">加入會員</a>
    </div>

  </div>

</body>

</html>